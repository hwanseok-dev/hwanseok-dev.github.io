---
title: "[Django][The Insta] 최초 설정"
excerpt: ""
date: 2021-01-25
last_modified_at: 
categories:
  - Django
tags:
  - Django
  - The Insta
toc : true
toc_label: "Table of contents"
toc_icon: "list"  # corresponding Font Awesome icon name (without fa prefix)
toc_sticky: false
---

**Info Notice:**  
안녕하세요. **HwanSeok**입니다.  
{: .notice--info}

# venv

## Create venv

```shell
cd {project root}
mkdir venvs
cd venvs
python -m venv thereact
cd bin
pwd # /home/niklasjang/pycharm_projects/venvs/thereact/bin
```

## Apply alias

Update ~/.bashrc  

```shell
vi ~/.bashrc
```

In ~/.bashrc    

```shell 
(... default settings...)
# Add Below
alias activate=". /home/niklasjang/pycharm_projects/venvs/thereact/bin/activate"
```

Activate venv  

```shell
cd {project root}

activate 
```

Output  

```shell
(thereact) niklasjang@niklasjang-ultrabook:~/pycharm_projects/The-Insta$ 
```

# Database(postgresql) 

## Install

<https://www.postgresql.org/download/linux/ubuntu/>  

```shell
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo apt-get update
sudo apt-get -y install postgresql
```

## Log in as default user

<https://docs.boundlessgeo.com/suite/1.1.1/dataadmin/pgGettingStarted/firstconnect.html#setting-a-password-for-the-postgres-user>

```shell
sudo -u postgres psql postgres
\password 'user password'
\q
```

## Create user, database

```shell
sudo -u postgres psql

create database 'theinsta';
CREATE USER 'hwanseok' WITH PASSWORD 'password';
ALTER ROLE 'hwanseok' SET client_encoding TO 'utf8'; 
ALTER ROLE 'hwanseok' SET default_transaction_isolation TO 'read committed'; 
ALTER ROLE 'hwanseok' SET TIME ZONE 'Asia/Seoul';
GRANT ALL PRIVILEGES ON DATABASE 'theinsta' 명 To 'hwanseok';
```  

# Django Project

## Create Project

```shell
cd {project root}
mkdir The-Insta
cd The-Insta
django-admin startproject config .
tree
```

Output  

```shell
(thereact) niklasjang@niklasjang-ultrabook:~/pycharm_projects/The-Insta$ tree
.
├── LICENSE
├── README.md
├── __pycache__
│   ├── dev_settings.cpython-38.pyc
│   └── manage.cpython-38.pyc
├── config
│   ├── __init__.py
│   ├── __pycache__
│   │   ├── __init__.cpython-38.pyc
│   │   ├── settings.cpython-38.pyc
│   │   ├── urls.cpython-38.pyc
│   │   └── wsgi.cpython-38.pyc
│   ├── asgi.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── dev_settings.py
└── manage.py
```  

## Hide SECRET_KEY, Set database

```shell
# config/settings.py
try:
    from dev_settings import *
except ImportError:
    pass
```

```shell
# ./dev_settings.py

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = '********************'
# Database
# https://docs.djangoproject.com/en/3.1/ref/settings/#databases
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': '**********',
        'USER': '**********',
        'PASSWORD': '**********',
        'HOST': 'localhost',
        'PORT': '',
    }
}
```


# Migrate Django with Database

```shell
sudo apt install libpq-dev
pip install psycopg2
python manage.py migrate
python manage.py runserver
```

```shell
# Ouput
System check identified no issues (0 silenced).
January 25, 2021 - 07:21:52
Django version 3.1.5, using settings 'config.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
```

# React Client

## Install yarn

```shell
npm install --global yarn
``` 


**Success Notice:**
{: .notice--success}

# 개발환경

- ubuntu 20.04
- python 3.8.5
- django 3.1.5
- pip 20.0.2
- yarn 1.22.10


[1]: https://wikidocs.net/70588
[2]: https://wikidocs.net/72407#2_1